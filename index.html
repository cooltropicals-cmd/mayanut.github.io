<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MayaNut</title>

<style>
  :root{
    --ink:#eef3ff;
    --panel:rgba(12,16,34,.55);
    --line:rgba(255,255,255,.12);
    --inputBG:rgba(255,255,255,.08);
    --inputLine:rgba(255,255,255,.22);
    --gold-top:#ffe992; --gold-mid:#ffc44d; --gold-low:#e79a21; --gold-deep:#c97a11;
    --cardBG: rgba(8,12,30,.50);
    --cardBorder: var(--line);
  }

  html,body{
    height:100%; margin:0; color:var(--ink);
    font-family: Inter, system-ui, sans-serif;
    display:flex; flex-direction:column; min-height:100%;
    overflow-x:hidden;
    background: linear-gradient(120deg, #0d2f14, #1a5c2e, #0d2f14);
    background-size: 400% 400%;
    animation: bgShift 20s ease infinite;
  }
  @keyframes bgShift {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }

  /* Topbar */
  .topbar{position:fixed;top:0;left:0;right:0;z-index:30;display:flex;align-items:center;justify-content:space-between;padding:10px 16px;background:var(--panel);border-bottom:1px solid var(--line);backdrop-filter:blur(10px) saturate(140%)}
  .brandLogo{display:block;height:32px;width:auto}
  .nav{display:flex;gap:18px;align-items:center}
  .nav a{color:var(--ink);text-decoration:none;font-weight:700;font-size:14px;padding:8px 12px;border-radius:10px;border:1px solid transparent}
  .nav a[aria-current="page"], .nav a:hover{border-color:var(--line);background:rgba(255,255,255,.06)}

  /* Stage */
  .stage{flex:1;display:flex;align-items:center;justify-content:center;padding-top:96px;padding-bottom:80px}
  .panel{width:min(980px,92vw);text-align:center}
  .heroRow{display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:16px}
  .heroLogo{display:block;width:min(560px,80vw);}
  .flag{width:200px;height:120px;display:block}

  /* Search + chat */
  .searchWrap{width:min(820px,94vw); margin:0 auto 14px;}
  .searchWrap input{
    width:100%; height:48px; padding:12px 14px; font-size:15px; color:#e9eeff;
    background:var(--inputBG); border:1px solid var(--inputLine); border-radius:12px;
  }
  .searchWrap input::placeholder{color:#cfe8ff; animation:pulse 2.4s ease-in-out infinite;}
  @keyframes pulse {0%,100%{opacity:.55} 50%{opacity:1}}

  .chat{
    width:min(820px,94vw); margin:8px auto 0; display:flex; flex-direction:column; gap:10px;
  }
  .bubble{
    text-align:left; background:var(--cardBG); border:1px solid var(--cardBorder);
    border-radius:14px; padding:12px; color:#eaf2ff;
  }
  .bubble a{color:#ffe992; font-weight:700; text-decoration:none}
  .bubble a:hover{text-decoration:underline}

  /* Quick buttons */
  .quickRow{width:min(820px,94vw);margin:14px auto 0;display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .quick{background:var(--cardBG);border:1px solid var(--cardBorder);border-radius:14px;padding:14px;text-align:center;color:#eaf2ff;text-decoration:none;font-weight:700;transition:transform .2s ease, background .2s ease, border-color .2s ease;}
  .quick:hover{transform:translateY(-3px);background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.18)}

  /* Footer */
  footer{width:100%;color:#c9d3ef;border-top:1px solid var(--line);background:rgba(10,14,34,.55);font-size:13px;padding:14px 16px;text-align:center;position:relative}
  .social{position:absolute;right:20px;top:50%;transform:translateY(-50%);}
  .ig-link{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px}
  .ig-link svg{width:22px;height:22px;display:block}
</style>
</head>
<body>

<header class="topbar">
  <a href="index.html" aria-label="MayaNut home">
    <svg class="brandLogo" viewBox="0 0 1200 260" role="img">
      <text x="40" y="180" font-family="Poppins, Inter" font-weight="900" font-size="180" fill="gold">MayaNut‚Ñ¢</text>
    </svg>
  </a>
  <nav class="nav" aria-label="Main">
    <a href="index.html" aria-current="page">Home</a>
    <a href="buy.html">Buy</a>
    <a href="about.html">About</a>
    <a href="research.html">Research</a>
    <a href="gallery.html">Gallery</a>
  </nav>
</header>

<main class="stage">
  <div class="panel">
    <!-- Flag + Logo row (improved stars) -->
    <div class="heroRow">
      <svg class="flag" viewBox="0 0 7410 3900" aria-label="United States flag" role="img">
        <defs>
          <g id="star">
            <path d="M0,-98 L22,-30 95,-30 36,12 58,80 0,38 -58,80 -36,12 -95,-30 -22,-30 Z" transform="scale(0.6)"/>
          </g>
          <g id="row6"><use href="#star" x="247"/><use href="#star" x="741"/><use href="#star" x="1235"/><use href="#star" x="1729"/><use href="#star" x="2223"/><use href="#star" x="2717"/></g>
          <g id="row5"><use href="#star" x="494"/><use href="#star" x="988"/><use href="#star" x="1482"/><use href="#star" x="1976"/><use href="#star" x="2470"/></g>
        </defs>
        <rect width="7410" height="3900" fill="#b22234"/>
        <path d="M0,450h7410v300H0 M0,1050h7410v300H0 M0,1650h7410v300H0 M0,2250h7410v300H0 M0,2850h7410v300H0 M0,3450h7410v300H0" fill="#fff"/>
        <rect width="2964" height="2100" fill="#3c3b6e"/>
        <g fill="#fff">
          <use href="#row6" y="210"/><use href="#row5" y="420"/>
          <use href="#row6" y="630"/><use href="#row5" y="840"/>
          <use href="#row6" y="1050"/><use href="#row5" y="1260"/>
          <use href="#row6" y="1470"/><use href="#row5" y="1680"/>
          <use href="#row6" y="1890"/>
        </g>
      </svg>

      <svg class="heroLogo" viewBox="0 0 1200 260" role="img" aria-label="MayaNut">
        <text x="40" y="180" font-family="Poppins, Inter" font-weight="900" font-size="180" fill="gold">MayaNut‚Ñ¢</text>
      </svg>
    </div>

    <!-- Search / chat -->
    <div class="searchWrap">
      <input id="search" placeholder="üîé Search mayanut.com" aria-label="Search MayaNut" />
    </div>
    <div id="chat" class="chat" aria-live="polite" aria-atomic="false"></div>

    <div class="quickRow">
      <a class="quick" href="about.html">What Is MayaNut‚Ñ¢?</a>
      <a class="quick" href="buy.html">Buy MayaNut‚Ñ¢ Products!</a>
    </div>
  </div>
</main>

<footer>
  Copyright ¬© 2025 MayaNut - All Rights Reserved.
</footer>

<script>
  // --- Simple fuzzy Q&A engine for MayaNut terms ---
  const synonyms = [
    "mayanut","maya nut","mayanut‚Ñ¢","breadnut","bread nut",
    "brosimum alicastrum","ojoche","ojocheÃÅ","ramon","ram√≥n","ramon nut","maya-nut"
  ];

  // Levenshtein distance (small + fast)
  function lev(a,b){
    a=a.toLowerCase(); b=b.toLowerCase();
    const m=a.length,n=b.length; if(!m) return n; if(!n) return m;
    const dp=new Array(n+1); for(let j=0;j<=n;j++) dp[j]=j;
    for(let i=1;i<=m;i++){
      let prev=dp[0]++; // dp[j-1] from previous row
      for(let j=1;j<=n;j++){
        const temp=dp[j];
        dp[j]=a[i-1]===b[j-1]? prev : 1+Math.min(prev, dp[j-1], dp[j]);
        prev=temp;
      }
    }
    return dp[n];
  }

  // checks if query contains any synonym (case-insensitive, allows small typos)
  function mentionsMayaNut(q){
    const s = q.toLowerCase();
    // direct contains
    if (synonyms.some(word => s.includes(word))) return true;
    // fuzzy: check each token against synonyms with edit distance <=2
    const tokens = s.split(/[^a-z√°√©√≠√≥√∫√º√±]+/i).filter(Boolean);
    for(const t of tokens){
      for(const w of synonyms){
        if (Math.abs(t.length - w.length) > 2) continue;
        if (lev(t, w) <= 2) return true;
      }
    }
    return false;
  }

  // Random response helpers
  const pick = arr => arr[Math.floor(Math.random()*arr.length)];

  const aboutLines = [
    "Great question! Learn more on our <a href='about.html'>About</a> page.",
    "You‚Äôll find the full story on <a href='about.html'>About</a>.",
    "For background and FAQs, jump to <a href='about.html'>About</a>.",
    "We‚Äôve got the details waiting on <a href='about.html'>About</a>."
  ];

  const infoLines = [
    "MayaNut (also called breadnut, ojoche, or Ram√≥n) comes from <em>Brosimum alicastrum</em>. It‚Äôs naturally caffeine-free and roasts to a warm, nutty flavor.",
    "Our MayaNut Powder is made from the seed of the Maya nut tree (<em>Brosimum alicastrum</em>) ‚Äî great in smoothies, baking, and coffee-style drinks.",
    "MayaNut is a versatile, nutrient-dense seed used for centuries across Mesoamerica; we mill it into a smooth, flavorful flour.",
    "Looking for a wholesome, roasted flavor? MayaNut Powder bakes beautifully and blends into hot or cold drinks."
  ];

  const routeLines = [
    "Want to try it? Head to the <a href='buy.html'>Buy</a> page.",
    "Curious about origins and benefits? See <a href='about.html'>About</a>.",
    "For research updates, check <a href='research.html'>Research</a>.",
    "Product details and sizes live on <a href='buy.html'>Buy</a>."
  ];

  function makeResponse(q){
    const lower = q.toLowerCase();
    const asksAbout = /(what\s+is|tell\s+me\s+about|who\s+made|who\s+is|learn\s+more|more\s+info|about)/i.test(q);
    const wantsAbout = mentionsMayaNut(q) && (asksAbout || /maya\s*nut/i.test(q));
    const wantsBuy = /(buy|price|order|shop|where\s+to\s+get|how\s+to\s+buy)/i.test(q);
    const wantsResearch = /(research|stud(y|ies)|science|paper|nutrition|data)/i.test(q);

    if(!mentionsMayaNut(q)){
      return pick([
        "Try searching for terms like <em>MayaNut</em>, <em>breadnut</em>, or <em>Brosimum alicastrum</em>.",
        "Tip: ask about MayaNut, breadnut, or Ram√≥n ‚Äî I‚Äôll point you to the right page.",
        "Looking for MayaNut info? Try ‚ÄúWhat is MayaNut?‚Äù or ‚ÄúMaya nut powder‚Äù."
      ]);
    }
    if (wantsAbout) {
      return pick(infoLines) + " " + pick(aboutLines);
    }
    if (wantsBuy) {
      return pick(infoLines) + " " + "Ready to purchase? Visit the <a href='buy.html'>Buy</a> page.";
    }
    if (wantsResearch) {
      return pick(infoLines) + " " + "We‚Äôre publishing updates soon ‚Äî see <a href='research.html'>Research</a>.";
    }
    // general mention -> vary routes
    return pick(infoLines) + " " + pick(routeLines);
  }

  const input = document.getElementById('search');
  const chat = document.getElementById('chat');

  function addBubble(html){
    const div = document.createElement('div');
    div.className = 'bubble';
    div.innerHTML = html;
    chat.prepend(div); // newest on top
  }

  input.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){
      const q = input.value.trim();
      if(!q) return;
      const reply = makeResponse(q);
      addBubble(reply);
      // auto-route if explicitly ‚Äúmaya nut‚Äù or ‚Äúlearn more‚Äù
      if (/^\s*(maya\s*nut|mayanut|about)\s*$/i.test(q) || /learn\s+more/i.test(q)){
        setTimeout(()=>{ location.href='about.html'; }, 400);
      }
      input.value = '';
    }
  });
</script>
</body>
</html>
