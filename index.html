<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MayaNut™</title>

<!-- Favicon: mini text logo -->
<link rel="icon" href='data:image/svg+xml;utf8,
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
    <rect width="200" height="200" fill="#4b0000"/>
    <text x="50%" y="60%" text-anchor="middle"
          font-family="Poppins,Arial,sans-serif" font-size="90"
          font-weight="900" fill="white" stroke="gray" stroke-width="2">M</text>
  </svg>'/>

<style>
  :root{
    --ink:#ffffff;
    --bg1:#3a0000;
    --bg2:#4b0000;
    --bg3:#6a0d0d;
    --line:rgba(255,255,255,.22);
  }
  html, body {
    height:100%;
    margin:0;
    color:var(--ink);
    font-family: Inter, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    overflow:hidden; /* single-screen */
    background:
      radial-gradient(70vmax 70vmax at 50% 60%, var(--bg3), transparent 70%),
      radial-gradient(60vmax 60vmax at 15% 20%, #5a0a0a, transparent 60%),
      radial-gradient(60vmax 60vmax at 85% 90%, #2e0000, transparent 60%),
      linear-gradient(120deg, var(--bg1), var(--bg2) 40%, var(--bg1));
  }
  body::before{
    content:"";
    position:fixed; inset:0;
    background: radial-gradient(60vmax 60vmax at 50% 60%, rgba(255,255,255,.12), rgba(255,255,255,0) 65%); /* lighter behind center logo */
    mix-blend-mode: screen; pointer-events:none; opacity:.9;
    animation: drift 22s ease-in-out infinite;
  }
  @keyframes drift{ 0%{transform:translateY(0)} 50%{transform:translateY(-1rem)} 100%{transform:translateY(0)} }

  /* Top bar */
  .topbar{
    position:fixed; top:0; left:0; right:0; height:56px;
    display:flex; align-items:center; gap:16px; padding:0 14px;
    background:linear-gradient(to bottom, rgba(0,0,0,.5), rgba(0,0,0,.25));
    border-bottom:1px solid var(--line); backdrop-filter:blur(6px) saturate(140%);
    z-index:100;
  }
  .logoText{
    font-size:22px; font-weight:900; color:#fff; text-decoration:none;
    -webkit-text-stroke:1px gray; text-shadow:0 10px 18px rgba(0,0,0,.4);
  }
  .nav{ margin-left:auto; display:flex; gap:10px; flex-wrap:wrap }
  .nav a{
    color:#fff; text-decoration:none; font-weight:700; font-size:14px;
    padding:8px 10px; border-radius:10px; border:1px solid transparent;
  }
  .nav a:hover{ border-color:var(--line); background:rgba(255,255,255,.08) }

  /* Center content */
  .wrap{
    height:100dvh;
    display:grid; place-items:center;
    grid-template-rows: auto auto auto 1fr;
    gap:14px; padding-top:70px; padding-bottom:70px; box-sizing:border-box;
  }
  .bigLogo{
    font-size:64px; font-weight:900; color:#fff; text-align:center;
    -webkit-text-stroke:2px gray; text-shadow:0 10px 18px rgba(0,0,0,.4);
    user-select:none;
  }
  .search{ width:min(760px,92vw); display:grid }
  .search input{
    height:52px; width:100%; padding:0 16px; font-size:16px; color:#fff;
    background:rgba(0,0,0,.28); border:1px solid var(--line); border-radius:14px;
    outline:none; backdrop-filter:blur(4px) saturate(120%);
  }
  .search input::placeholder{ color:#ffdede; opacity:.95 }

  .bubbles{ width:min(760px,92vw); display:grid; gap:10px }
  .bubble{
    display:inline-flex; align-items:center; gap:10px;
    background:rgba(0,0,0,.25); border:1px solid var(--line);
    padding:12px 14px; border-radius:16px; font-weight:700; color:#fff; text-decoration:none;
    backdrop-filter: blur(6px) saturate(140%);
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
  }
  .bubble:hover{ transform:translateY(-1px); background:rgba(0,0,0,.35); border-color:rgba(255,255,255,.28) }

  /* Chat popup for Buy */
  .chatPopup{
    position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
    width:min(520px,92vw); background:rgba(0,0,0,.4);
    border:1px solid var(--line); border-radius:16px; padding:16px;
    backdrop-filter: blur(8px) saturate(150%); z-index:120; display:none;
    box-shadow:0 20px 40px rgba(0,0,0,.45);
  }
  .chatHeader{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
  .chatHeader strong{ font-size:16px }
  .closeBtn{
    background:transparent; border:1px solid var(--line); color:#fff; border-radius:10px;
    padding:6px 10px; cursor:pointer;
  }
  .chatBody{ background:rgba(0,0,0,.25); border:1px solid var(--line); border-radius:12px; padding:12px; font-weight:700 }
  .backdrop{
    display:none; position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:110;
  }

  /* Bottom bar */
  .footer{
    position:fixed; inset-inline:0; bottom:0;
    display:flex; align-items:center; justify-content:space-between;
    padding:10px 14px;
    background:linear-gradient(to top, rgba(0,0,0,.5), rgba(0,0,0,.25));
    background-color:#300000; color:#ffeaea;
    border-top:1px solid var(--line); font-size:13px;
  }
  .ig{
    display:inline-flex; align-items:center; justify-content:center;
    width:36px; height:36px; border-radius:9px;
    background:rgba(255,255,255,.10); border:1px solid var(--line); text-decoration:none;
  }
  .ig:hover{ background:rgba(255,255,255,.18) }
  .ig svg{ width:20px; height:20px; fill:#fff }
</style>
</head>
<body>

<header class="topbar" role="banner">
  <a class="logoText" href="index.html" aria-label="MayaNut home">MayaNut™</a>
  <nav class="nav" aria-label="Main">
    <a href="index.html">Home</a>
    <a href="#" id="buyTab">Buy</a>
    <a href="about.html">About</a>
    <a href="research.html">Research</a>
    <a href="https://instagram.com/mayanut.co" target="_blank" rel="noopener">Instagram</a>
  </nav>
</header>

<main class="wrap" aria-label="MayaNut landing">
  <!-- Big center “logo” as text -->
  <div class="bigLogo">MayaNut™</div>

  <!-- Search -->
  <form class="search" onsubmit="handleSearch(event)">
    <input id="q" name="q" placeholder="🔎 Search mayanut.com" autocomplete="off" />
  </form>

  <!-- Two quick bubbles -->
  <nav class="bubbles" aria-label="Quick actions">
    <a class="bubble" href="about.html">What is MayaNut™?</a>
    <a class="bubble" href="#" id="buyBubble">Buy MayaNut™ Products</a>
  </nav>

  <div aria-hidden="true"></div>
</main>

<!-- Buy chat popup -->
<div class="backdrop" id="shade"></div>
<section class="chatPopup" id="chatBox" role="dialog" aria-modal="true" aria-labelledby="chatTitle">
  <div class="chatHeader">
    <strong id="chatTitle">MayaNut Café</strong>
    <button class="closeBtn" type="button" onclick="closeChat()">Close</button>
  </div>
  <div class="chatBody">MayaNut Café Coming Soon!</div>
</section>

<footer class="footer" role="contentinfo">
  <div>© <span id="yr"></span> MayaNut — All Rights Reserved.</div>
  <a class="ig" href="https://instagram.com/mayanut.co" target="_blank" rel="noopener" aria-label="Instagram @mayanut.co">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 5.5zm0 2A3.5 3.5 0 1 0 15.5 12 3.5 3.5 0 0 0 12 7.5zM18 6.2a1 1 0 1 1-1 1 1 0 0 1 1-1z"/>
    </svg>
  </a>
</footer>

<script>
  document.getElementById('yr').textContent = new Date().getFullYear();

  // Open/close Buy chat popup
  const chatBox = document.getElementById('chatBox');
  const shade = document.getElementById('shade');
  const openChat = (e) => {
    if(e) e.preventDefault();
    chatBox.style.display = 'block';
    shade.style.display = 'block';
  };
  const closeChat = () => {
    chatBox.style.display = 'none';
    shade.style.display = 'none';
  };
  document.getElementById('buyTab').addEventListener('click', openChat);
  document.getElementById('buyBubble').addEventListener('click', openChat);
  shade.addEventListener('click', closeChat);

  // --- Fuzzy detection for "maya nut" variants in the search bar ---
  const variants = ["mayanut","maya nut","mayanut™","mayanut","maya-nut","maya  nut","may a nut","mayanutt","mayanute"];
  function lev(a,b){a=a.toLowerCase();b=b.toLowerCase();const m=a.length,n=b.length;if(!m)return n;if(!n)return m;const d=new Array(n+1);for(let j=0;j<=n;j++)d[j]=j;for(let i=1;i<=m;i++){let prev=d[0]++;for(let j=1;j<=n;j++){const t=d[j];d[j]=a[i-1]===b[j-1]?prev:1+Math.min(prev,d[j-1],d[j]);prev=t;}}return d[n];}
  function mentionsMayaNut(q){
    const s=(q||"").toLowerCase();
    if(variants.some(v=>s.includes(v))) return true;
    // token-wise leniency
    const tokens=s.split(/[^a-z0-9]+/i).filter(Boolean);
    for(const t of tokens){
      for(const v of variants){
        if(Math.abs(t.length - v.length) > 2) continue;
        if(lev(t, v) <= 2) return true; // small typos ok
      }
    }
    return false;
  }

  function handleSearch(e){
    e.preventDefault();
    const q = (document.getElementById('q').value || '').trim();
    if(!q) return;
    if(mentionsMayaNut(q)){
      // Show quick helpful response, keep user on this screen
      openChat(); // Reuse popup for a quick response if you’d like
      document.querySelector('#chatBox .chatBody').textContent =
        "MayaNut (Brosimum alicastrum) — learn more on the About page!";
    } else if (/(buy|shop|order|price)/i.test(q)) {
      openChat();
      document.querySelector('#chatBox .chatBody').textContent = "MayaNut Café Coming Soon!";
    } else {
      openChat();
      document.querySelector('#chatBox .chatBody').textContent = "Try: “What is MayaNut?” or “Buy MayaNut Products”.";
    }
    document.getElementById('q').value = '';
  }
</script>
</body>
</html>
