<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MayaNut</title>

<!-- Favicon (MN gold circle) -->
<link rel="icon" type="image/svg+xml"
href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0%25' stop-color='%23fff0b5'/%3E%3Cstop offset='55%25' stop-color='%23ffd46b'/%3E%3Cstop offset='100%25' stop-color='%23f3ac3a'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='32' cy='32' r='30' fill='url(%23g)'/%3E%3Ctext x='32' y='40' text-anchor='middle' font-family='Poppins,Arial' font-weight='800' font-size='26' fill='%23000' opacity='.9'%3EMN%3C/text%3E%3C/svg%3E" />

<style>
  :root{
    --ink:#eef3ff;
    --panel:rgba(12,16,34,.55);
    --line:rgba(255,255,255,.12);
    --inputBG:rgba(255,255,255,.08);
    --inputLine:rgba(255,255,255,.22);

    /* Gold logo gradient */
    --gold1:#fff0b5; --gold2:#ffd46b; --gold3:#f3ac3a;

    /* Ball */
    --ball:#7CFF36; /* lime */
  }

  html,body{
    height:100%; margin:0; color:var(--ink);
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
    display:flex; flex-direction:column; min-height:100%;
    background: linear-gradient(180deg, #0b1a0f 0%, #143821 40%, #0f2f1d 100%);
    overflow-x:hidden;
  }

  /* Blurry “lava lamp” green background (more motion & variety) */
  .bg-blobs, .bg-blobs-2, .bg-blobs-3{
    position:fixed; inset:-22% -22% -22% -22%;
    z-index:-1; pointer-events:none; filter: blur(28px) saturate(120%);
  }
  .bg-blobs{
    background:
      radial-gradient(36% 40% at 20% 25%, rgba(110,190,120,.35), transparent 60%),
      radial-gradient(32% 35% at 75% 20%, rgba(165,230,170,.28), transparent 65%),
      radial-gradient(28% 30% at 50% 60%, rgba(90,150,110,.32), transparent 60%);
    animation: drift1 36s ease-in-out infinite;
  }
  .bg-blobs-2{
    background:
      radial-gradient(30% 34% at 18% 70%, rgba(70,150,95,.30), transparent 60%),
      radial-gradient(30% 34% at 75% 70%, rgba(125,200,140,.28), transparent 60%),
      radial-gradient(22% 26% at 50% 40%, rgba(160,220,160,.25), transparent 60%);
    animation: drift2 44s ease-in-out infinite;
    mix-blend-mode: screen;
  }
  .bg-blobs-3{
    background:
      radial-gradient(24% 28% at 35% 10%, rgba(185,255,185,.20), transparent 60%),
      radial-gradient(30% 32% at 68% 50%, rgba(90,160,105,.22), transparent 60%),
      radial-gradient(22% 26% at 52% 82%, rgba(60,120,85,.22), transparent 60%);
    animation: drift3 52s ease-in-out infinite;
    opacity:.95;
  }
  @keyframes drift1 {0%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(-26px,22px,0) scale(1.04)}100%{transform:translate3d(0,0,0) scale(1)}}
  @keyframes drift2 {0%{transform:translate3d(0,0,0) scale(1.02)}50%{transform:translate3d(28px,-18px,0) scale(1.06)}100%{transform:translate3d(0,0,0) scale(1.02)}}
  @keyframes drift3 {0%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(-18px,16px,0) scale(1.05)}100%{transform:translate3d(0,0,0) scale(1)}}

  /* Top bar */
  .topbar{position:fixed;top:0;left:0;right:0;z-index:30;display:flex;align-items:center;justify-content:space-between;padding:10px 16px;background:var(--panel);border-bottom:1px solid var(--line);backdrop-filter:blur(10px) saturate(140%)}
  .brandLogo{display:block;height:28px;width:auto}

  .nav{display:flex;gap:18px;align-items:center}
  .nav a{color:var(--ink);text-decoration:none;font-weight:700;font-size:14px;padding:8px 12px;border-radius:10px;border:1px solid transparent}
  .nav a:hover{border-color:var(--line);background:rgba(255,255,255,.06)}

  .stage{flex:1;display:flex;align-items:center;justify-content:center;padding-top:88px;padding-bottom:80px}
  .panel{width:min(900px,92vw);text-align:center}

  /* Row with mascot + chat */
  .heroRow{
    display:flex; align-items:flex-start; justify-content:center; gap:18px;
    width:min(900px,92vw); margin:0 auto;
  }

  /* Chatbar */
  .chatcol{flex:1; min-width:0}
  .chatbar{display:flex;align-items:center;gap:10px;justify-content:center;margin:0 auto;width:100%}
  .chatbar input{flex:1;height:48px;padding:10px 12px;font-size:15px;color:#e9eeff;background:var(--inputBG);border:1px solid var(--inputLine);border-radius:12px;outline:none}
  .chatbar input::placeholder{color:#cfe8ff}
  .chatbar input:focus{border-color:rgba(143,220,255,.75);box-shadow:0 0 0 3px rgba(143,220,255,.25)}
  .log{width:100%;margin:12px auto 0;background:rgba(8,12,30,.55);border:1px solid var(--line);border-radius:14px;padding:12px;max-height:42vh;overflow:auto;text-align:left}

  /* Mascot + bubble */
  .mn-mascot-wrap{position:relative; width:168px; flex:0 0 168px;}
  .mn-mascot{cursor:pointer; display:block; width:160px; margin-top:2px;}
  .speech{
    position:absolute; left:-12px; top:-10px; transform:translateX(-100%);
    max-width:240px; background:#fff; color:#223;
    border-radius:14px; padding:10px 12px; font-size:13px; line-height:1.25;
    box-shadow:0 8px 24px rgba(0,0,0,.25);
  }
  .speech:after{
    content:""; position:absolute; right:-8px; top:24px; width:0; height:0;
    border-left:10px solid #fff; border-top:8px solid transparent; border-bottom:8px solid transparent;
  }

  /* Mascot animations */
  @keyframes mn-bob { 0%{ transform: translateY(0) } 50%{ transform: translateY(3px) } 100%{ transform: translateY(0) } }
  @keyframes mn-stem-sway { 0%{ transform: rotate(0deg) } 50%{ transform: rotate(5deg) } 100%{ transform: rotate(0deg) } }
  .mn-bob { animation: mn-bob 5.2s ease-in-out infinite; transform-origin: 130px 140px; }
  .mn-stem { transform-origin: 130px 44px; animation: mn-stem-sway 7s ease-in-out infinite; }

  /* Side-to-side shake */
  @keyframes mn-shake {
    0%,100%{ transform:translateX(0) rotate(0deg) }
    20%{ transform:translateX(-3px) rotate(-2deg) }
    40%{ transform:translateX(3px) rotate(2deg) }
    60%{ transform:translateX(-2px) rotate(-1.6deg) }
    80%{ transform:translateX(2px) rotate(1.6deg) }
  }
  .mascot-shake { animation: mn-shake .45s ease-in-out; }

  /* Impact squash (directional) */
  @keyframes impactX { 0%{transform:scale(1.06,.94)} 45%{transform:scale(.88,1.12)} 100%{transform:scale(1.06,.94)} }
  @keyframes impactY { 0%{transform:scale(1.06,.94)} 45%{transform:scale(1.12,.88)} 100%{transform:scale(1.06,.94)} }
  .deformX { animation: impactX .28s ease-out; transform-origin:130px 130px; }
  .deformY { animation: impactY .28s ease-out; transform-origin:130px 130px; }
  .mn-squish { transform: scale(1.06,.94); transform-origin:130px 130px; } /* base cute oval */

  /* Sections (unchanged basic styling) */
  .section{width:min(980px,94vw);margin:24px auto 0;background:rgba(8,12,30,.50);border:1px solid var(--line);border-radius:16px;padding:18px;backdrop-filter:blur(4px); text-align:left}
  .section h3{margin:0 0 8px;color:#fff}
  .section p{margin:8px 0 0;color:#cfe9ff}

  footer{width:100%;color:#c9d3ef;border-top:1px solid var(--line);background:rgba(10,14,34,.55);text-align:center;font-size:13px;padding:12px 8px;position:relative}
  .ig-link{position:absolute;right:72px;top:50%;transform:translateY(-50%);display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:6px}
  .ig-link svg{transition:transform .2s ease,filter .2s ease}
  .ig-link:hover svg{transform:scale(1.08);filter:drop-shadow(0 0 8px rgba(255,255,255,.65))}

  /* Bouncy lime ball (DOM element, not canvas, so it never blocks inputs) */
  #bouncer{
    position:fixed; z-index:5; left:40vw; top:50vh; width:44px; height:44px; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #D9FF9D 0%, var(--ball) 55%, #49CC00 100%);
    box-shadow: 0 8px 18px rgba(0,0,0,.25), inset 0 6px 12px rgba(255,255,255,.35);
    transform: translate(-50%,-50%);
    cursor:pointer;
    will-change: transform;
  }
</style>
</head>
<body>

<div class="bg-blobs"></div>
<div class="bg-blobs-2"></div>
<div class="bg-blobs-3"></div>

<!-- Logo symbol (™ tight; dx=0) -->
<svg width="0" height="0" style="position:absolute">
  <defs>
    <linearGradient id="mn-gold" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="var(--gold1)"/>
      <stop offset="55%" stop-color="var(--gold2)"/>
      <stop offset="100%" stop-color="var(--gold3)"/>
    </linearGradient>
    <filter id="mn-shadow" x="-20%" y="-40%" width="140%" height="200%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0,0,0,.35)"/>
    </filter>
    <symbol id="MayaNutLogo" viewBox="0 0 1200 260" preserveAspectRatio="xMinYMid meet">
      <text x="40" y="180"
            font-family="Poppins, Inter, system-ui, sans-serif"
            font-weight="900" font-size="180"
            fill="url(#mn-gold)" filter="url(#mn-shadow)">
        <tspan>MayaNut</tspan>
        <tspan dx="0" dy="-68" font-size="60">™</tspan>
      </text>
    </symbol>
  </defs>
</svg>

<header class="topbar" role="banner">
  <svg class="brandLogo" viewBox="0 0 1200 260" aria-label="MayaNut logo"><use href="#MayaNutLogo"></use></svg>
  <nav class="nav" aria-label="Primary">
    <a href="#home" id="navHome">MayaNut</a>
    <a href="#buy"  id="navBuy">Buy</a>
    <a href="#about" id="navAbout">About</a>
    <a href="https://instagram.com/mayanut.co" target="_blank" rel="noopener">Instagram</a>
  </nav>
</header>

<main id="home" class="stage">
  <div class="panel">
    <!-- Center hero logo -->
    <svg class="heroLogo" viewBox="0 0 1200 260" style="width:min(560px,80vw);margin:6px auto 16px;display:block">
      <use href="#MayaNutLogo"></use>
    </svg>

    <!-- Mascot + Chat row -->
    <div class="heroRow">
      <!-- Mascot with bubble -->
      <div class="mn-mascot-wrap">
        <div id="welcomeBubble" class="speech">Welcome to MayaNut.com! Please type your questions in the chat bar.</div>

        <!-- MASCOT SVG (enlarged) -->
        <svg id="mascot" class="mn-mascot mn-bob" viewBox="0 0 260 260" width="160" height="160" role="img" aria-label="Mateo the MayaNut">
          <defs>
            <clipPath id="mnBodyClip">
              <!-- Slightly tapered top fruit shape -->
              <path id="mnBodyPath"
                d="M130,36
                   C112,36  94,49  87,66
                   C80,83   78,94  74,112
                   C66,142  80,176 104,194
                   C118,204 142,204 156,194
                   C180,176 194,142 186,112
                   C182,94  180,83 173,66
                   C166,49  148,36 130,36 Z"/>
            </clipPath>
            <radialGradient id="mnFruit" cx="42%" cy="34%" r="70%">
              <stop offset="0%"  stop-color="#FFE3A6"/>
              <stop offset="55%" stop-color="#FFB553"/>
              <stop offset="100%" stop-color="#E88324"/>
            </radialGradient>
            <radialGradient id="mnTopRed" cx="50%" cy="16%" r="38%">
              <stop offset="0%"  stop-color="rgba(217,52,42,.45)"/>
              <stop offset="100%" stop-color="rgba(217,52,42,0)"/>
            </radialGradient>
            <radialGradient id="mnBelly" cx="50%" cy="84%" r="48%">
              <stop offset="0%"  stop-color="rgba(110,180,105,.55)"/>
              <stop offset="100%" stop-color="rgba(110,180,105,0)"/>
            </radialGradient>
            <linearGradient id="mnStem" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%"  stop-color="#6ed17b"/>
              <stop offset="100%" stop-color="#2e8a42"/>
            </linearGradient>
            <filter id="mnDrop" x="-40%" y="-40%" width="180%" height="180%">
              <feDropShadow dx="0" dy="5" stdDeviation="5" flood-color="rgba(0,0,0,.25)"/>
            </filter>
          </defs>

          <g id="mascotDeform" class="mn-squish" filter="url(#mnDrop)">
            <g id="mascotGroup">
              <!-- Body -->
              <use href="#mnBodyPath" fill="url(#mnFruit)"/>
              <g clip-path="url(#mnBodyClip)">
                <rect x="0" y="0" width="260" height="260" fill="url(#mnTopRed)"/>
                <rect x="0" y="0" width="260" height="260" fill="url(#mnBelly)"/>
              </g>

              <!-- Stem (flat base) -->
              <g class="mn-stem">
                <rect x="104" y="44" width="52" height="10" fill="#2e8a42"/>
                <path d="M128,22 c 10,-2 22,0 28,6 c-6,6 -12,16 -14,26 h-18 c 2,-10 4,-18 4,-32 z"
                      fill="url(#mnStem)" stroke="#1f6f34" stroke-width="3"/>
                <path d="M146,28 c-6,6 -10,12 -12,22" fill="none"
                      stroke="rgba(255,255,255,.35)" stroke-linecap="round" stroke-width="2"/>
              </g>

              <!-- Faint speckles -->
              <g clip-path="url(#mnBodyClip)" fill="rgba(255,175,80,.45)">
                <circle cx="94" cy="88" r="2.2"/><circle cx="112" cy="80" r="1.9"/>
                <circle cx="150" cy="78" r="2.1"/><circle cx="166" cy="96" r="1.7"/>
                <circle cx="100" cy="106" r="1.6"/><circle cx="130" cy="110" r="1.5"/>
                <circle cx="142" cy="92" r="1.7"/><circle cx="118" cy="96" r="1.5"/>
                <circle cx="156" cy="108" r="1.5"/><circle cx="122" cy="126" r="1.4"/>
                <circle cx="146" cy="126" r="1.4"/><circle cx="106" cy="124" r="1.3"/>
              </g>

              <!-- Eyes (taller ovals, farther apart, higher) -->
              <g>
                <ellipse cx="94"  cy="114" rx="15" ry="27" fill="#fff"/>
                <ellipse cx="166" cy="114" rx="15" ry="27" fill="#fff"/>
                <circle  cx="104" cy="116" r="7" fill="#000"/>
                <circle  cx="176" cy="116" r="7" fill="#000"/>
              </g>

              <!-- Eyelids for blink -->
              <g class="eyelids" transform="translate(0,88)">
                <rect class="eyelid" x="79"  y="0" width="30" height="30" rx="6" fill="#FFB553" style="transform:scaleY(0)"/>
                <rect class="eyelid" x="151" y="0" width="30" height="30" rx="6" fill="#FFB553" style="transform:scaleY(0)"/>
              </g>

              <!-- Eyebrows: inner ends up toward forehead (simple slanted lines) -->
              <g stroke="#000" stroke-linecap="round">
                <!-- left: outer lower -> inner higher -->
                <line x1="84" y1="88" x2="116" y2="72" stroke-width="6"/>
                <!-- right: inner higher -> outer lower -->
                <line x1="144" y1="72" x2="176" y2="88" stroke-width="6"/>
              </g>

              <!-- Cute little rounded U-smile (lower, more centered) -->
              <path d="M104,168 Q130,190 156,168"
                    fill="none" stroke="#000" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            </g>
          </g>
        </svg>
      </div>

      <!-- Chat column -->
      <div class="chatcol">
        <div class="chatbar">
          <input id="chatInput" placeholder="Ask about MayaNut™ or our products" aria-label="Type what you want and press Enter" />
        </div>
        <div class="log" id="chatLog" aria-live="polite"></div>
      </div>
    </div>
  </div>
</main>

<section id="buy" class="section" aria-labelledby="buyTitle">
  <h3 id="buyTitle">Buy</h3>
  <p>Search Through Our Wonderful Products — real items coming soon.</p>
</section>

<section id="about" class="section" aria-labelledby="aboutTitle">
  <h3 id="aboutTitle">About</h3>
  <p><strong>MayaNut</strong> is a South Florida company promoting the cultivation of the MayaNut tree,
    <em>Brosimum alicastrum</em>. <strong>August Kokus</strong> is the founder and current CEO of MayaNut™.</p>
</section>

<footer>
  © 2025 MayaNut LLC. All rights reserved.
  <a class="ig-link" href="https://instagram.com/mayanut.co" target="_blank" rel="noopener" aria-label="MayaNut on Instagram">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="white"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 5.5zm0 2A3.5 3.5 0 1 0 15.5 12 3.5 3.5 0 0 0 12 7.5zM18 6.2a1 1 0 1 1-1 1 1 0 0 1 1-1z"/></svg>
  </a>
</footer>

<!-- The bouncy lime ball -->
<div id="bouncer" title="Click me!"></div>

<script>
/* ===== Randomized welcome bubble text (incl. Mateo intros) ===== */
const welcomeLines = [
  "Welcome to MayaNut.com! Please type your questions in the chat bar.",
  "Hi there! Ask me anything about MayaNut™ in the box to the right.",
  "Glad you’re here—type your MayaNut™ questions and I’ll help!",
  "Welcome! Curious about MayaNut™? Pop your question into the chat.",
  "Hey, I'm Mateo…the MayaNut! Ask me about the tree or our products.",
  "Hola! I’m Mateo, your friendly MayaNut. Type your question and let’s chat!",
  "Hey! Mateo here—MayaNut™ facts, recipes, and products? Fire away!",
  "Welcome to the grove—ask your MayaNut™ question in the chat!",
  "Hi! Wondering what MayaNut™ is? Type your question to the right.",
  "I’m Mateo. I know all about MayaNut™—go ahead, ask me!"
];
document.addEventListener('DOMContentLoaded', ()=>{
  const wb = document.getElementById('welcomeBubble');
  wb.textContent = welcomeLines[Math.floor(Math.random()*welcomeLines.length)];
});

/* ===== Simple navigation smooth scroll (if using anchors) ===== */
['navHome','navBuy','navAbout'].forEach(id=>{
  const el=document.getElementById(id);
  if(el) el.addEventListener('click', e=>{
    e.preventDefault(); document.getElementById(el.textContent.toLowerCase()).scrollIntoView({behavior:'smooth'});
  });
});

/* ===== Chat: on-topic guard (kept simple) ===== */
const input = document.getElementById('chatInput');
const logBox = document.getElementById('chatLog');
function say(role, text){
  const el=document.createElement('div'); el.className='msg';
  el.innerHTML=`<strong>${role}:</strong> ${text}`;
  logBox.appendChild(el); logBox.scrollTop=logBox.scrollHeight;
}
input.addEventListener('keydown', e=>{
  if(e.key==='Enter'){
    const t=input.value.trim(); if(!t) return;
    say('You', t); input.value='';
    const low=t.toLowerCase();
    const keys = ["mayanut","maya nut","brosimum","breadnut","ramón","ramon","ojoche","oox","guáimaro","guaimaro"];
    const relevant = keys.some(k=>low.includes(k));
    if(relevant){
      say('Mateo', "Yum! MayaNut™ is versatile—coffee, tortillas, tea, smoothies, you name it. What are you curious about?");
    } else {
      const redirects = [
        "I’m Mateo and I can only chat about MayaNut™ (Brosimum alicastrum) and our products—try asking about the tree or foods!",
        "Let’s keep it to MayaNut™ topics—cultivation, uses, or what we sell.",
        "I’m here for MayaNut™ questions—care to ask about the species, benefits, or our products?",
        "Sticking to MayaNut™ keeps me smart! Ask about the tree, coffee/tea, or flour.",
        "I can help with MayaNut™ only—try a question about the species or our lineup."
      ];
      say('Mateo', redirects[Math.floor(Math.random()*redirects.length)]);
    }
  }
});

/* ===== Mascot click: blink + side-to-side shake ===== */
const mascot = document.getElementById('mascot');
const group  = document.getElementById('mascotGroup');
mascot.addEventListener('click', ()=>{
  mascot.classList.add('blink');
  group.classList.add('mascot-shake');
  setTimeout(()=> mascot.classList.remove('blink'), 260);
  setTimeout(()=> group.classList.remove('mascot-shake'), 500);
});

/* ===== Micro mini-game: bouncy lime ball with squash/stretch and Mateo reactions ===== */
(function(){
  const ball = document.getElementById('bouncer');
  const mascSVG = document.getElementById('mascot');
  const mascDeform = document.getElementById('mascotDeform');

  // Physics state
  let x = innerWidth*0.6, y = innerHeight*0.45;
  let vx = 2.2, vy = 1.8;
  const r = 22; // visual radius (44px div)
  const damp = 0.985;   // air “drag”
  const bounce = 0.92;  // wall bounce
  const boost = 1.18;   // Mateo collision boost

  // Squash & stretch values (derived from velocity)
  function setBallTransform(){
    const speed = Math.hypot(vx,vy);
    const maxS = 0.22;
    const s = Math.min(maxS, speed/12); // 0..~.22
    // direction-based squash
    const angle = Math.atan2(vy,vx);
    const sx = 1 + s, sy = 1 - s;
    const cos = Math.cos(angle), sin = Math.sin(angle);
    // rotate + scale via CSS: we’ll just rotate; scale anisotropic looks fine visually
    ball.style.transform = `translate(${x - r}px, ${y - r}px) rotate(${angle}rad) scale(${sx},${sy})`;
  }

  // Hit Mateo (approximate his body as an ellipse from his bounding box)
  function checkMateoCollision(){
    const mr = mascSVG.getBoundingClientRect();
    const cx = mr.left + mr.width/2;
    const cy = mr.top  + mr.height*0.54;
    const rx = mr.width*0.28;
    const ry = mr.height*0.38;

    // Convert ball center to the same coordinate system (already page coords)
    const dx = (x - cx), dy = (y - cy);
    const inNorm = (dx*dx)/(rx*rx) + (dy*dy)/(ry*ry); // <=1 means inside ellipse
    if (inNorm <= 1){
      // normal approx (push out along gradient)
      const nx = dx/(rx*rx), ny = dy/(ry*ry);
      const len = Math.hypot(nx,ny) || 1;
      const ux = nx/len, uy = ny/len;

      // place ball outside Mateo
      const push = 6;
      x += ux * (push + 2);
      y += uy * (push + 2);

      // reflect velocity with a boost
      const dot = vx*ux + vy*uy;
      vx = vx - 2*dot*ux; vy = vy - 2*dot*uy;
      vx *= boost; vy *= boost;

      // Mateo reaction: side-shake + directional deform
      group.classList.add('mascot-shake');
      mascDeform.classList.remove('deformX','deformY'); // reset
      if (Math.abs(ux) > Math.abs(uy)) mascDeform.classList.add('deformX');
      else mascDeform.classList.add('deformY');
      setTimeout(()=>group.classList.remove('mascot-shake'), 360);
      setTimeout(()=>{ mascDeform.classList.remove('deformX','deformY'); }, 300);
    }
  }

  function step(){
    // integrate
    x += vx; y += vy;
    vx *= damp; vy *= damp;

    // walls
    const left = r, right = innerWidth - r, top = 64 + r, bottom = innerHeight - r;
    if (x < left){ x = left; vx = Math.abs(vx)*bounce; }
    if (x > right){ x = right; vx = -Math.abs(vx)*bounce; }
    if (y < top){ y = top; vy = Math.abs(vy)*bounce; }
    if (y > bottom){ y = bottom; vy = -Math.abs(vy)*bounce; }

    // Mateo collision
    checkMateoCollision();

    setBallTransform();
    requestAnimationFrame(step);
  }
  step();

  // Click to “kick” the ball (adds velocity from click direction)
  ball.addEventListener('click', (e)=>{
    // center of ball in page coords:
    const rect = ball.getBoundingClientRect();
    const bx = rect.left + rect.width/2;
    const by = rect.top  + rect.height/2;
    const dx = (bx - e.clientX), dy = (by - e.clientY);
    const L = Math.hypot(dx,dy) || 1;
    const kick = 5.2;
    vx += (dx/L)*kick;
    vy += (dy/L)*kick;
  });

  // Keep layout-safe on resize
  window.addEventListener('resize', ()=>{
    x = Math.min(Math.max(x, r), innerWidth - r);
    y = Math.min(Math.max(y, 64 + r), innerHeight - r);
  });
})();
</script>
</body>
</html>
